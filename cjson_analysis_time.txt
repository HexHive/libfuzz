+ ./analysis.sh
+ '[' -z /home/libfuzz ']'
+ WORK=/workspaces/libfuzz/analysis/cjson/work
+ rm -rf /workspaces/libfuzz/analysis/cjson/work
+ mkdir -p /workspaces/libfuzz/analysis/cjson/work
+ mkdir -p /workspaces/libfuzz/analysis/cjson/work/lib /workspaces/libfuzz/analysis/cjson/work/include
+ export CC=wllvm
+ CC=wllvm
+ export CXX=wllvm++
+ CXX=wllvm++
+ export LLVM_COMPILER=clang
+ LLVM_COMPILER=clang
+ echo ''
+ export LLVM_COMPILER_PATH=/bin
+ LLVM_COMPILER_PATH=/bin
+ export LIBFUZZ_LOG_PATH=/workspaces/libfuzz/analysis/cjson/work/apipass
+ LIBFUZZ_LOG_PATH=/workspaces/libfuzz/analysis/cjson/work/apipass
+ mkdir -p /workspaces/libfuzz/analysis/cjson/work/apipass
+ echo 'make 1'
+ mkdir -p /workspaces/libfuzz/analysis/cjson/repo/cJSON_build
+ cd /workspaces/libfuzz/analysis/cjson/repo/cJSON_build
+ cmake .. -DCMAKE_INSTALL_PREFIX=/workspaces/libfuzz/analysis/cjson/work -DBUILD_SHARED_AND_STATIC_LIBS=On -DBUILD_SHARED_LIBS=off -DCMAKE_BUILD_TYPE=Debug '-DCMAKE_C_FLAGS_DEBUG=-g -O0' '-DCMAKE_CXX_FLAGS_DEBUG=-g -O0'
CMake Warning:
  Manually-specified variables were not used by the project:

    CMAKE_CXX_FLAGS_DEBUG


+ rm -rf /workspaces/libfuzz/analysis/cjson/work/apipass/apis.log
+ touch /workspaces/libfuzz/analysis/cjson/work/apipass/exported_functions.txt
+ touch /workspaces/libfuzz/analysis/cjson/work/apipass/incomplete_types.txt
+ touch /workspaces/libfuzz/analysis/cjson/work/apipass/apis_clang.json
+ touch /workspaces/libfuzz/analysis/cjson/work/apipass/apis_llvm.json
+ touch /workspaces/libfuzz/analysis/cjson/work/apipass/coerce.log
+ echo 'make clean'
++ nproc
+ make -j12 clean
+ echo make
++ nproc
+ make -j12
WARNING:Did not recognize the compiler flag "libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
WARNING:Did not recognize the compiler flag "../libcjson.so.1.7.17"
+ echo 'make install'
+ make install
+ extract-bc -b /workspaces/libfuzz/analysis/cjson/work/lib/libcjson.a
Writing output to /workspaces/libfuzz/analysis/cjson/work/lib/libcjson.a.bc
+ /home/libfuzz/tool/misc/extract_included_functions.py -i /workspaces/libfuzz/analysis/cjson/work/include -p /workspaces/libfuzz/targets/cjson/public_headers.txt -e /workspaces/libfuzz/analysis/cjson/work/apipass/exported_functions.txt -t /workspaces/libfuzz/analysis/cjson/work/apipass/incomplete_types.txt -a /workspaces/libfuzz/analysis/cjson/work/apipass/apis_clang.json -n /workspaces/libfuzz/analysis/cjson/work/apipass/enum_types.txt
+ /home/libfuzz/condition_extractor/bin/extractor /workspaces/libfuzz/analysis/cjson/work/lib/libcjson.a.bc -interface /workspaces/libfuzz/analysis/cjson/work/apipass/apis_clang.json -output /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json -minimize_api /workspaces/libfuzz/analysis/cjson/work/apipass/apis_minimized.txt -v v0 -t json -do_indirect_jumps -data_layout /workspaces/libfuzz/analysis/cjson/work/apipass/data_layout.txt
Doing: cJSON_IsObject
Doing: cJSON_IsArray
Doing: cJSON_IsNull
Doing: cJSON_IsBool
Doing: cJSON_Duplicate
Doing: cJSON_CreateStringArray
Doing: cJSON_CreateDoubleArray
Doing: cJSON_CreateArrayReference
Doing: cJSON_IsRaw
Doing: cJSON_ReplaceItemInArray
Doing: cJSON_DeleteItemFromObjectCaseSensitive
Doing: cJSON_DetachItemFromObjectCaseSensitive
Doing: cJSON_DeleteItemFromArray
Doing: cJSON_DetachItemFromArray
Doing: cJSON_DetachItemViaPointer
Doing: cJSON_CreateArray
Doing: cJSON_AddArrayToObject
Doing: cJSON_CreateObject
Doing: cJSON_AddObjectToObject
Doing: cJSON_CreateRaw
Doing: cJSON_CreateString
Doing: cJSON_AddStringToObject
Doing: cJSON_CreateNumber
Doing: cJSON_ReplaceItemInObjectCaseSensitive
Doing: cJSON_AddNumberToObject
Doing: replace_item_in_object
Doing: cJSON_CreateBool
Doing: cJSON_AddBoolToObject
Doing: cJSON_IsTrue
Doing: cJSON_CreateFalse
Doing: print
Doing: cJSON_Parse
Doing: cJSON_AddRawToObject
Doing: print_value
Doing: print_string
Doing: cJSON_DetachItemFromObject
Doing: parse_number
Doing: print_string_ptr
Doing: parse_string
Doing: print_object
Doing: cJSON_IsFalse
Doing: cJSON_ReplaceItemInObject
Doing: cJSON_AddFalseToObject
Doing: buffer_skip_whitespace
Doing: cJSON_AddItemToObject
Doing: cJSON_IsInvalid
Doing: cJSON_CreateTrue
Doing: skip_utf8_bom
Doing: suffix_object
Doing: minify_string
Doing: cJSON_DeleteItemFromObject
Doing: cJSON_AddTrueToObject
Doing: cJSON_New_Item
Doing: add_item_to_array
Doing: cJSON_ParseWithLengthOpts
Doing: cJSON_IsString
Doing: cJSON_Delete
Doing: cJSON_GetErrorPtr
Doing: cJSON_Print
Doing: ensure
Doing: cJSON_CreateIntArray
Doing: parse_object
Doing: cJSON_free
Doing: cJSON_Minify
Doing: cJSON_GetNumberValue
Doing: cJSON_CreateFloatArray
Doing: get_decimal_point
Doing: compare_double
Doing: skip_oneline_comment
Doing: cJSON_AddNullToObject
Doing: cJSON_IsNumber
Doing: cJSON_GetObjectItemCaseSensitive
Doing: cJSON_CreateStringReference
Doing: cJSON_ParseWithLength
Doing: print_array
Doing: update_offset
Doing: cJSON_InitHooks
Doing: skip_multiline_comment
Doing: cJSON_CreateNull
Doing: cJSON_Version
Doing: cJSON_GetStringValue
Doing: parse_array
Doing: print_number
Doing: cJSON_SetValuestring
Doing: parse_value
Doing: cJSON_PrintBuffered
Doing: cJSON_SetNumberHelper
Doing: cJSON_PrintUnformatted
Doing: cJSON_InsertItemInArray
Doing: utf16_literal_to_utf8
Doing: cJSON_PrintPreallocated
Doing: cJSON_strdup
Doing: cJSON_GetArrayItem
Doing: cJSON_ReplaceItemViaPointer
Doing: parse_hex4
Doing: cJSON_GetArraySize
Doing: cJSON_Compare
Doing: get_array_item
Doing: case_insensitive_strcmp
Doing: cJSON_malloc
Doing: cJSON_CreateObjectReference
Doing: cJSON_GetObjectItem
Doing: create_reference
Doing: get_object_item
Doing: cJSON_ParseWithOpts
Doing: cJSON_AddItemReferenceToObject
Doing: cJSON_HasObjectItem
Doing: cJSON_AddItemToArray
Doing: add_item_to_object
Doing: cast_away_const
Doing: cJSON_AddItemToObjectCS
Doing: cJSON_AddItemReferenceToArray
Doing: llvm.fabs.f64
Doing: llvm.dbg.label
Doing: sprintf
Doing: malloc
Doing: llvm.memcpy.p0i8.p0i8.i64
Doing: realloc
Doing: free
Doing: localeconv
Doing: strlen
Doing: strcpy
Doing: llvm.dbg.declare
Doing: llvm.memset.p0i8.i64
Doing: tolower
Doing: strcmp
Doing: strncmp
Doing: __isoc99_sscanf
Doing: strtod
+ TMP_FILE=/tmp/const.tmp
++ cat
+ NEW_FIELD_CONSTRAINT='{
    "access": "create",
    "fields": [],
    "parent": 0,
    "type": "13e78f7269fb4001160f783455a4ca4d",
    "type_string": "%struct.cJSON*"
}'
+ echo '{' '"access":' '"create",' '"fields":' '[],' '"parent":' 0, '"type":' '"13e78f7269fb4001160f783455a4ca4d",' '"type_string":' '"%struct.cJSON*"' '}'
+ APIS='cJSON_CreateBool cJSON_AddNumberToObject cJSON_ParseWithOpts cJSON_CreateStringArray cJSON_CreateObjectReference cJSON_AddStringToObject cJSON_CreateArray cJSON_CreateTrue cJSON_AddTrueToObject cJSON_AddNullToObject  cJSON_CreateRaw cJSON_AddObjectToObject cJSON_Parse cJSON_AddBoolToObject cJSON_ParseWithLengthOpts cJSON_CreateString cJSON_CreateFalse cJSON_ParseWithLength cJSON_CreateNumber cJSON_AddArrayToObject cJSON_CreateArrayReference cJSON_CreateIntArray cJSON_CreateObject cJSON_CreateDoubleArray cJSON_AddFalseToObject cJSON_Duplicate cJSON_AddRawToObject cJSON_CreateStringReference cJSON_CreateNull cJSON_CreateFloatArray'
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateBool -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddNumberToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_ParseWithOpts -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateStringArray -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateObjectReference -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddStringToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateArray -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateTrue -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddTrueToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddNullToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateRaw -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddObjectToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_Parse -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddBoolToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_ParseWithLengthOpts -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateString -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateFalse -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_ParseWithLength -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateNumber -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddArrayToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateArrayReference -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateIntArray -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateDoubleArray -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddFalseToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_Duplicate -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_AddRawToObject -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateStringReference -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateNull -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ for a in ${APIS}
+ /workspaces/libfuzz/tool/misc/edit_constraints.py -n /tmp/const.tmp -f cJSON_CreateFloatArray -a -1 -c /workspaces/libfuzz/analysis/cjson/work/apipass/conditions.json
+ rm -f /tmp/const.tmp

real	0m12.465s
user	0m16.902s
sys	0m5.605s
